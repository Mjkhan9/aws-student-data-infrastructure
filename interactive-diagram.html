<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interactive Architecture | AWS Student Data Infrastructure</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive VPC architecture diagram showing network tiers, security groups, and data flow for AWS Student Data Infrastructure.">
    <meta name="keywords" content="AWS, VPC Architecture, Interactive Diagram, Network Security, Cloud Architecture">
    <meta name="author" content="Jawad Khan">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Interactive Architecture | AWS Student Data Infrastructure">
    <meta property="og:description" content="Interactive VPC architecture diagram with network tiers and security controls.">
    <meta property="og:url" content="https://mjkhan9.github.io/aws-student-data-infrastructure/interactive-diagram.html">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Interactive Architecture | AWS Student Data Infrastructure">
    <meta name="twitter:description" content="Interactive VPC architecture diagram with network tiers and security controls.">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mjkhan9.github.io/aws-student-data-infrastructure/interactive-diagram.html">
    
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23232f3e' width='100' height='100' rx='8'/><text y='.9em' x='50%' text-anchor='middle' font-size='70' fill='%23ff9900'>‚òÅ</text></svg>">
    <style>
        .diagram-page-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 16px;
            min-height: 600px;
        }
        
        .tier-sidebar {
            background: var(--aws-panel-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
            padding: 16px;
        }
        
        .tier-sidebar h3 {
            font-size: 13px;
            color: var(--aws-text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            font-weight: 700;
        }
        
        .vpc-tier {
            background: var(--aws-card-bg);
            border: 2px solid;
            border-radius: var(--aws-radius);
            padding: 12px;
            margin-bottom: 10px;
            transition: all 0.15s ease;
            cursor: pointer;
        }
        
        .vpc-tier:hover {
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .vpc-tier.selected {
            box-shadow: 0 0 0 2px var(--aws-orange);
        }
        
        .tier-internet { border-color: #b8860b; background: rgba(184, 134, 11, 0.1); }
        .tier-admin { border-color: #4a7cb8; background: rgba(74, 124, 184, 0.1); }
        .tier-app { border-color: #6b5ba3; background: rgba(107, 91, 163, 0.1); }
        .tier-db { border-color: #b84a7c; background: rgba(184, 74, 124, 0.1); }
        .tier-s3 { border-color: #2d8659; background: rgba(45, 134, 89, 0.1); }
        .tier-security { border-color: var(--aws-orange); background: rgba(255, 153, 0, 0.1); }
        
        .vpc-tier-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--aws-text-primary);
            margin-bottom: 4px;
        }
        
        .vpc-tier-cidr {
            font-size: 12px;
            color: var(--aws-text-tertiary);
            font-family: Monaco, monospace;
        }
        
        .diagram-canvas {
            background: var(--aws-panel-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
            padding: 16px;
        }
        
        .diagram-header {
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--aws-border);
        }
        
        .diagram-header h2 {
            font-size: 18px;
            color: var(--aws-text-primary);
            margin: 0 0 4px 0;
            font-weight: 700;
            border: none;
            padding: 0;
        }
        
        .diagram-subtitle {
            font-size: 12px;
            color: var(--aws-text-tertiary);
        }
        
        .diagram-viewport {
            position: relative;
            min-height: 450px;
            background-image: 
                linear-gradient(rgba(59, 130, 246, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(59, 130, 246, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            border-radius: var(--aws-radius);
        }
        
        .info-panel {
            background: var(--aws-card-bg);
            border: 1px solid var(--aws-border);
            border-left: 3px solid var(--aws-blue);
            border-radius: var(--aws-radius);
            padding: 16px;
            margin-top: 16px;
            display: none;
            animation: slideDown 0.3s ease;
        }
        
        .info-panel.visible {
            display: block;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .info-panel h3 {
            color: var(--aws-blue);
            font-size: 16px;
            margin-bottom: 8px;
            border: none;
            padding: 0;
        }
        
        .info-panel p {
            color: var(--aws-text-secondary);
            font-size: 13px;
            margin-bottom: 12px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 12px;
        }
        
        .info-item {
            background: var(--aws-panel-bg);
            padding: 10px;
            border-radius: var(--aws-radius);
            border: 1px solid var(--aws-border);
        }
        
        .info-label {
            font-size: 11px;
            color: var(--aws-text-tertiary);
            font-weight: 700;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .info-value {
            color: var(--aws-text-primary);
            font-weight: 500;
            font-size: 13px;
        }
        
        .sg-rules {
            background: var(--aws-panel-bg);
            padding: 12px;
            border-radius: var(--aws-radius);
            margin-top: 12px;
            border: 1px solid var(--aws-border);
        }
        
        .sg-rules-title {
            font-size: 12px;
            font-weight: 700;
            color: var(--aws-text-primary);
            margin-bottom: 8px;
        }
        
        .sg-rule {
            padding: 6px 8px;
            background: var(--aws-card-bg);
            margin: 4px 0;
            border-left: 2px solid var(--aws-green);
            font-family: Monaco, monospace;
            font-size: 11px;
            color: var(--aws-text-secondary);
        }
        
        .legend {
            display: flex;
            gap: 16px;
            justify-content: flex-start;
            margin-top: 12px;
            flex-wrap: wrap;
            padding: 12px;
            background: var(--aws-card-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--aws-text-secondary);
        }
        
        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 2px;
            border: 2px solid currentColor;
        }
        
        @media (max-width: 1024px) {
            .diagram-page-layout {
                grid-template-columns: 1fr;
            }
            
            .tier-sidebar {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .tier-sidebar h3 {
                grid-column: 1 / -1;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 600px) {
            .tier-sidebar {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
<header class="site-header">
    <div>
        <a href="index.html" class="logo">
            <span class="logo-icon">‚òÅ</span>
            AWS Student Data Infrastructure
        </a>
        <nav class="nav-links">
            <a href="index.html">Home</a>
            <a href="architecture.html">Architecture</a>
            <a href="automation.html">IAM Automation</a>
            <a href="docs.html">Documentation</a>
            <a href="review.html">Project Review</a>
            <a href="live-demo.html">Live Demo</a>
            <a href="interactive-diagram.html" class="active">Interactive Diagram</a>
            <a href="cost-calculator.html">Cost Calculator</a>
            <a href="security-simulator.html">Security Simulator</a>
        </nav>
        <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</header>
<main class="content">
    <section class="card">
        <h1>Interactive VPC Architecture</h1>
        <p>
            Click on any network tier to see detailed configuration, security rules, and role in the 
            three-tier architecture. This visualization demonstrates defense-in-depth security design 
            for student data protection.
        </p>
    </section>
<div class="diagram-page-layout">
    <aside class="tier-sidebar">
        <h3>Network Tiers</h3>
        
        <div class="vpc-tier tier-internet" data-component="internet">
            <div class="vpc-tier-title">üåê Internet Gateway</div>
            <div class="vpc-tier-cidr">Public Entry Point</div>
        </div>
        
        <div class="vpc-tier tier-admin" data-component="admin-tier">
            <div class="vpc-tier-title">üîß Admin Tier</div>
            <div class="vpc-tier-cidr">172.32.1.0/24</div>
        </div>
        
        <div class="vpc-tier tier-app" data-component="app-tier">
            <div class="vpc-tier-title">‚öôÔ∏è Application Tier</div>
            <div class="vpc-tier-cidr">172.32.10.0/24</div>
        </div>
        
        <div class="vpc-tier tier-db" data-component="db-tier">
            <div class="vpc-tier-title">üóÑÔ∏è Database Tier</div>
            <div class="vpc-tier-cidr">172.32.20.0/24</div>
        </div>
        
        <div class="vpc-tier tier-s3" data-component="s3-bucket">
            <div class="vpc-tier-title">üì¶ S3 Storage</div>
            <div class="vpc-tier-cidr">Encrypted Buckets</div>
        </div>
        
        <div class="vpc-tier tier-security" data-component="security">
            <div class="vpc-tier-title">üõ°Ô∏è Security & Logging</div>
            <div class="vpc-tier-cidr">CloudTrail + Flow Logs</div>
        </div>
    </aside>

    <div class="diagram-canvas">
        <div class="diagram-header">
            <h2>VPC Architecture: 172.32.0.0/16</h2>
            <div class="diagram-subtitle">Multi-tier network isolation with zero-trust security model</div>
        </div>
        
        <div class="diagram-viewport">
            <svg width="100%" height="450" viewBox="0 0 800 450" style="display: block;">
                <!-- VPC Container -->
                <rect x="20" y="20" width="760" height="410" fill="none" stroke="#3b82f6" stroke-width="2" rx="4"/>
                <text x="400" y="45" text-anchor="middle" font-size="14" fill="#d5dbdb" font-weight="700">VPC: 172.32.0.0/16</text>
                
                <!-- Admin Tier -->
                <rect x="40" y="70" width="220" height="90" fill="rgba(74, 124, 184, 0.15)" stroke="#4a7cb8" stroke-width="2" rx="3"/>
                <text x="150" y="95" text-anchor="middle" font-size="12" fill="#d5dbdb" font-weight="700">Admin Tier (Public)</text>
                <text x="150" y="115" text-anchor="middle" font-size="10" fill="#aab7b8">172.32.1.0/24</text>
                <text x="150" y="135" text-anchor="middle" font-size="10" fill="#aab7b8">Bastion ‚Ä¢ NAT Gateway</text>
                <text x="150" y="150" text-anchor="middle" font-size="9" fill="#6b7280">Corporate IP Only</text>
                
                <!-- App Tier -->
                <rect x="40" y="180" width="220" height="90" fill="rgba(107, 91, 163, 0.15)" stroke="#6b5ba3" stroke-width="2" rx="3"/>
                <text x="150" y="205" text-anchor="middle" font-size="12" fill="#d5dbdb" font-weight="700">Application Tier</text>
                <text x="150" y="225" text-anchor="middle" font-size="10" fill="#aab7b8">172.32.10.0/24</text>
                <text x="150" y="245" text-anchor="middle" font-size="10" fill="#aab7b8">ECS Fargate ‚Ä¢ ALB</text>
                <text x="150" y="260" text-anchor="middle" font-size="9" fill="#6b7280">NAT Outbound Only</text>
                
                <!-- DB Tier -->
                <rect x="40" y="290" width="220" height="90" fill="rgba(184, 74, 124, 0.15)" stroke="#b84a7c" stroke-width="2" rx="3"/>
                <text x="150" y="315" text-anchor="middle" font-size="12" fill="#d5dbdb" font-weight="700">Database Tier (Isolated)</text>
                <text x="150" y="335" text-anchor="middle" font-size="10" fill="#aab7b8">172.32.20.0/24</text>
                <text x="150" y="355" text-anchor="middle" font-size="10" fill="#aab7b8">RDS PostgreSQL Multi-AZ</text>
                <text x="150" y="370" text-anchor="middle" font-size="9" fill="#6b7280">No Internet Access</text>
                
                <!-- S3 Storage -->
                <rect x="300" y="180" width="220" height="90" fill="rgba(45, 134, 89, 0.15)" stroke="#2d8659" stroke-width="2" rx="3"/>
                <text x="410" y="205" text-anchor="middle" font-size="12" fill="#d5dbdb" font-weight="700">S3 Storage</text>
                <text x="410" y="225" text-anchor="middle" font-size="10" fill="#aab7b8">student-data-reports</text>
                <text x="410" y="245" text-anchor="middle" font-size="10" fill="#aab7b8">SSE-KMS Encrypted</text>
                <text x="410" y="260" text-anchor="middle" font-size="9" fill="#6b7280">VPC Endpoint Access</text>
                
                <!-- Security & Logging -->
                <rect x="560" y="70" width="200" height="200" fill="rgba(255, 153, 0, 0.08)" stroke="#ff9900" stroke-width="2" rx="3"/>
                <text x="660" y="95" text-anchor="middle" font-size="12" fill="#ff9900" font-weight="700">Security & Audit</text>
                <text x="660" y="125" text-anchor="middle" font-size="10" fill="#aab7b8">CloudTrail All Regions</text>
                <text x="660" y="150" text-anchor="middle" font-size="10" fill="#aab7b8">VPC Flow Logs</text>
                <text x="660" y="175" text-anchor="middle" font-size="10" fill="#aab7b8">GuardDuty Active</text>
                <text x="660" y="200" text-anchor="middle" font-size="10" fill="#aab7b8">KMS Encryption</text>
                <text x="660" y="225" text-anchor="middle" font-size="10" fill="#aab7b8">CloudWatch Alarms</text>
                <text x="660" y="250" text-anchor="middle" font-size="9" fill="#6b7280">Full Audit Trail</text>
                
                <!-- Traffic Flow Arrows -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#64748b"/>
                    </marker>
                </defs>
                
                <!-- Admin to App -->
                <line x1="150" y1="160" x2="150" y2="180" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
                <!-- App to DB -->
                <line x1="150" y1="270" x2="150" y2="290" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
                <!-- App to S3 -->
                <line x1="260" y1="225" x2="300" y2="225" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
            </svg>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="color: #4a7cb8;"></div>
                <span>Public Tier (IGW)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="color: #6b5ba3;"></div>
                <span>Private Tier (NAT)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="color: #b84a7c;"></div>
                <span>Isolated Tier</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="color: #2d8659;"></div>
                <span>Storage</span>
            </div>
        </div>
    </div>
</div>

<div id="infoPanel" class="info-panel"></div>
</main>
<footer class="site-footer">
    <div class="footer-content">
        <p>Interactive VPC Architecture ‚Ä¢ AWS Student Data Infrastructure ‚Ä¢ 2025</p>
        <p class="footer-links">
            <a href="https://github.com/mjkhan9/aws-student-data-infrastructure" target="_blank" rel="noopener noreferrer">
                View on GitHub
            </a>
        </p>
    </div>
</footer>
<script>
const componentInfo = {
    "internet": {
        title: "Internet Gateway",
        description: "Public entry point allowing controlled access to admin tier resources through corporate IP restrictions.",
        details: {
            "Type": "Internet Gateway",
            "Attached To": "VPC 172.32.0.0/16",
            "Route Target": "Admin subnet only",
            "Access Control": "Corporate IP whitelist"
        },
        securityRules: [
            "Only admin subnet has IGW route",
            "All other subnets use NAT for outbound",
            "No direct internet access to workloads",
            "Network ACLs restrict inbound traffic"
        ]
    },
    "admin-tier": {
        title: "Admin Tier (Public Subnets)",
        description: "Public-facing administrative layer providing secure access to internal resources through hardened bastion hosts.",
        details: {
            "Subnets": "admin-az1a, admin-az1b",
            "CIDR": "172.32.1.0/24, 172.32.2.0/24",
            "Availability Zones": "us-east-1a, us-east-1b",
            "Internet Access": "Internet Gateway attached",
            "Components": "Bastion hosts, NAT Gateways"
        },
        securityRules: [
            "Ingress: TCP 22 from corporate IP ranges only",
            "Egress: TCP 22/443 to application tier",
            "NACL: Deny all by default, explicit allows only"
        ]
    },
    "app-tier": {
        title: "Application Tier (Private Subnets)",
        description: "Private application layer hosting containerized workloads with no direct internet access.",
        details: {
            "Subnets": "app-az1a, app-az1b",
            "CIDR": "172.32.10.0/24, 172.32.11.0/24",
            "Internet Access": "Outbound only via NAT Gateway",
            "Compute": "ECS Fargate, Lambda functions",
            "Load Balancer": "Application Load Balancer (HTTPS)"
        },
        securityRules: [
            "Ingress: TCP 22 from bastion-sg only",
            "Ingress: TCP 8443 from alb-sg only",
            "Egress: TCP 5432 to db-sg only",
            "Egress: TCP 443 to 0.0.0.0/0 (via NAT)"
        ]
    },
    "db-tier": {
        title: "Database Tier (Isolated Subnets)",
        description: "Fully isolated database layer with no internet routing. RDS instances accept connections only from application tier.",
        details: {
            "Subnets": "db-az1a, db-az1b",
            "CIDR": "172.32.20.0/24, 172.32.21.0/24",
            "Internet Access": "None (no route to internet)",
            "Database": "RDS PostgreSQL 15.3 Multi-AZ",
            "Encryption": "KMS customer-managed key",
            "Backups": "Automated daily + 30-day retention"
        },
        securityRules: [
            "Ingress: TCP 5432 from app-sg ONLY",
            "Egress: None (stateful response only)",
            "NACL: Deny all except app subnet CIDR",
            "No public IP addresses assigned",
            "SSL/TLS required for all connections"
        ]
    },
    "s3-bucket": {
        title: "S3 Storage (Encrypted)",
        description: "Encrypted object storage for student data exports with versioning and access logging.",
        details: {
            "Bucket Name": "student-data-reports-production",
            "Encryption": "SSE-KMS (customer-managed key)",
            "Versioning": "Enabled",
            "Public Access": "Blocked at all levels",
            "Access Logging": "All requests logged",
            "Lifecycle": "Transition to Glacier after 90 days"
        },
        securityRules: [
            "Bucket policy: Deny all public access",
            "IAM policy: Tag-based access control",
            "VPC Endpoint: Private S3 access only",
            "Object Lock: WORM mode for compliance"
        ]
    },
    "security": {
        title: "Security & Audit Logging",
        description: "Comprehensive logging capturing all API calls, network traffic, and security events.",
        details: {
            "CloudTrail": "Management + data events logged",
            "VPC Flow Logs": "1-minute intervals to S3",
            "GuardDuty": "Threat detection enabled",
            "Log Retention": "CloudTrail 90d, VPC 30d",
            "Integrity": "Log file validation enabled",
            "Encryption": "Dedicated KMS key for logs"
        },
        securityRules: [
            "CloudTrail: All IAM, RDS, S3, VPC events",
            "VPC Flow Logs: Accepted and rejected traffic",
            "GuardDuty: Threat intelligence feeds",
            "SNS Alerts: Critical findings trigger alerts",
            "S3 Bucket Policy: Prevents log deletion"
        ]
    }
};

document.querySelectorAll(".vpc-tier").forEach(tier => {
    tier.addEventListener("click", function(e) {
        e.stopPropagation();
        
        // Update selection state
        document.querySelectorAll(".vpc-tier").forEach(t => t.classList.remove('selected'));
        this.classList.add('selected');
        
        const componentType = this.dataset.component;
        const info = componentInfo[componentType];
        
        if (info) {
            displayInfo(info);
        }
    });
});

function displayInfo(info) {
    const panel = document.getElementById("infoPanel");
    
    let detailsHTML = '<div class="info-grid">';
    for (const [label, value] of Object.entries(info.details)) {
        detailsHTML += `
            <div class="info-item">
                <div class="info-label">${label}</div>
                <div class="info-value">${value}</div>
            </div>
        `;
    }
    detailsHTML += "</div>";
    
    let rulesHTML = "";
    if (info.securityRules && info.securityRules.length > 0) {
        rulesHTML = '<div class="sg-rules"><div class="sg-rules-title">Security Controls</div>';
        info.securityRules.forEach(rule => {
            rulesHTML += `<div class="sg-rule">‚úì ${rule}</div>`;
        });
        rulesHTML += "</div>";
    }
    
    panel.innerHTML = `
        <h3>${info.title}</h3>
        <p>${info.description}</p>
        ${detailsHTML}
        ${rulesHTML}
    `;
    
    panel.classList.add("visible");
    panel.scrollIntoView({ behavior: "smooth", block: "nearest" });
}

// Close panel when clicking outside
document.addEventListener("click", function(e) {
    if (!e.target.closest(".vpc-tier") && !e.target.closest(".info-panel")) {
        document.querySelectorAll(".vpc-tier").forEach(t => t.classList.remove('selected'));
    }
});

// Mobile menu toggle
document.querySelector('.mobile-menu-toggle')?.addEventListener('click', function() {
    document.querySelector('.nav-links').classList.toggle('mobile-open');
    this.classList.toggle('active');
});

// Close mobile menu when clicking on a link
document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', function() {
        document.querySelector('.nav-links').classList.remove('mobile-open');
        document.querySelector('.mobile-menu-toggle').classList.remove('active');
    });
});
</script>
</body>
</html>
