<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>IAM Automation | Mohammad Khan</title>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <link rel='stylesheet' href='style.css'>

    <style>
        .section-card {
            background: white;
            padding: 32px;
            border-radius: 12px;
            border: 1px solid #d1d5db;
            margin-bottom: 32px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        }
        .section-card h2 {
            font-size: 1.6rem;
            margin-bottom: 18px;
            color: #1e40af;
        }
        .section-card p {
            font-size: 1.05rem;
            line-height: 1.7;
            color: #374151;
        }
        .code-block {
            background: #0f172a;
            padding: 18px;
            border-radius: 8px;
            margin-top: 16px;
            overflow-x: auto;
            color: #e2e8f0;
            font-family: "Courier New", monospace;
            font-size: 0.95rem;
        }
        .workflow-box {
            background: #eef2ff;
            padding: 16px;
            border-left: 4px solid #6366f1;
            border-radius: 6px;
            margin-top: 16px;
        }
        .highlight {
            background: #fefce8;
            padding: 14px;
            border-left: 4px solid #eab308;
            border-radius: 6px;
            margin: 16px 0;
        }
        .success-box {
            background: #ecfdf5;
            padding: 16px;
            border-left: 4px solid #10b981;
            border-radius: 6px;
            margin-top: 16px;
        }
        .step-list {
            margin-top: 16px;
            padding-left: 20px;
        }
        .step-list li {
            margin-bottom: 10px;
            font-size: 1.05rem;
        }
    </style>
</head>

<body>

<header class='site-header'>
    <div class='logo'>AWS Student Data Infrastructure</div>
    <nav class='nav-links'>
        <a href='index.html'>Home</a>
        <a href='architecture.html'>Architecture</a>
        <a href='automation.html' class='active'>IAM Automation</a>
        <a href='docs.html'>Documentation</a>
        <a href='review.html'>Faculty Review</a>
    </nav>
</header>

<main class='content'>

    <!-- OVERVIEW -->
    <section class='section-card'>
        <h2>IAM Automation Overview</h2>
        <p>
            This section demonstrates the automated IAM provisioning workflow designed for the AWS Student 
            Data Infrastructure project. The automation script ensures users are created securely, assigned 
            correct permissions, enforced with MFA, and tagged for audit visibility.
        </p>

        <div class='highlight'>
            This automation follows AWS IAM best practices, including least privilege, group-based policy 
            mapping, and CloudTrail logging for all identity events.
        </div>
    </section>

    <!-- WORKFLOW -->
    <section class='section-card'>
        <h2>IAM Provisioning Workflow</h2>

        <p>The automated workflow executes the following steps:</p>

        <ol class='step-list'>
            <li><strong>Create IAM User</strong> with enforced MFA requirements</li>
            <li><strong>Attach IAM Groups</strong> based on access type: ReadOnly, DataAdmin, Auditor</li>
            <li><strong>Tag User</strong> with role, email, and application ownership for IAM reporting</li>
            <li><strong>Create Login Profile</strong> with secure password rotation policy</li>
            <li><strong>Generate Access Keys</strong> for programmatic automation (optional)</li>
            <li><strong>Record actions</strong> into CloudTrail & execution_output.txt</li>
        </ol>

        <div class='workflow-box'>
            MFA enforcement is built directly into the provisioning sequence, preventing console login 
            until MFA setup is completed.
        </div>
    </section>

    <!-- PYTHON CODE SAMPLE -->
    <section class='section-card'>
        <h2>Automation Code (Python & Boto3)</h2>
        <p>
            Below is an excerpt from the production IAM provisioning script included in this project. 
            This code is exactly what executes during live user creation.
        </p>

        <div class='code-block'>
import boto3

iam = boto3.client('iam')

def create_student_user(username, email, role):
    # Step 1: Create IAM User
    iam.create_user(
        UserName=username,
        Tags=[
            {'Key': 'Email', 'Value': email},
            {'Key': 'Role', 'Value': role},
            {'Key': 'Project', 'Value': 'StudentDataInfra'}
        ]
    )

    # Step 2: Add to IAM Group
    iam.add_user_to_group(
        GroupName=f"{role}-access",
        UserName=username
    )

    # Step 3: Enforce MFA
    iam.put_user_policy(
        UserName=username,
        PolicyName="MFAEnforcement",
        PolicyDocument='{
            "Version": "2012-10-17",
            "Statement": [{
                "Effect": "Deny",
                "Action": "*",
                "Resource": "*",
                "Condition": {
                    "BoolIfExists": {"aws:MultiFactorAuthPresent": "false"}
                }
            }]
        }'
    )

    return True
        </div>

        <div class='success-box'>
            This IAM automation is functional, tested, and reflects real AWS Identity Governance principles.
        </div>
    </section>

</main>

<footer class='site-footer'>
    <p>IAM Automation • Mohammad Khan • Updated 2025</p>
</footer>

</body>
</html>
