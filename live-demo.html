<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live IAM Demo | AWS Student Data Infrastructure</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive IAM automation demo showing real-time user provisioning with security controls and audit logging.">
    <meta name="keywords" content="AWS, IAM Demo, Live Demo, Interactive Demo, Cloud Automation, DevOps">
    <meta name="author" content="Jawad Khan">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Live IAM Demo | AWS Student Data Infrastructure">
    <meta property="og:description" content="Interactive IAM automation demo showing real-time user provisioning with security controls.">
    <meta property="og:url" content="https://mjkhan9.github.io/aws-student-data-infrastructure/live-demo.html">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Live IAM Demo | AWS Student Data Infrastructure">
    <meta name="twitter:description" content="Interactive IAM automation demo with real-time provisioning simulation.">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mjkhan9.github.io/aws-student-data-infrastructure/live-demo.html">
    
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23232f3e' width='100' height='100' rx='8'/><text y='.9em' x='50%' text-anchor='middle' font-size='70' fill='%23ff9900'>☁</text></svg>">
    <style>
        .demo-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 16px;
        }
        
        .run-button-container {
            text-align: center;
            padding: 32px;
            background: var(--aws-panel-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
            margin-bottom: 16px;
        }
        
        .run-button {
            background: var(--aws-orange);
            color: var(--aws-squid-ink);
            border: none;
            padding: 16px 48px;
            font-size: 16px;
            font-weight: 700;
            border-radius: var(--aws-radius);
            cursor: pointer;
            transition: all 0.15s ease;
            font-family: inherit;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .run-button:hover:not(:disabled) {
            background: var(--aws-orange-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .run-button:disabled {
            background: var(--aws-border);
            cursor: not-allowed;
            opacity: 0.6;
            transform: none;
        }
        
        .console-section {
            background: var(--aws-card-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
            overflow: hidden;
        }
        
        .console-header {
            background: var(--aws-squid-ink);
            padding: 12px 16px;
            border-bottom: 1px solid var(--aws-border);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .console-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .console-dot.red { background: #ff5f56; }
        .console-dot.yellow { background: #ffbd2e; }
        .console-dot.green { background: #27c93f; }
        
        .console-title {
            color: var(--aws-text-tertiary);
            font-size: 13px;
            margin-left: 8px;
        }
        
        .console-window {
            background: #0d1117;
            padding: 16px;
            min-height: 400px;
            max-height: 500px;
            overflow-y: auto;
            font-family: Monaco, Consolas, monospace;
            font-size: 12px;
            line-height: 1.6;
        }
        
        .log-line {
            margin: 2px 0;
            opacity: 0;
            animation: fadeIn 0.3s forwards;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .log-info { color: #58a6ff; }
        .log-success { color: #3fb950; }
        .log-warning { color: #d29922; }
        .log-error { color: #f85149; }
        .log-dim { color: #8b949e; }
        .log-header { color: var(--aws-orange); font-weight: 700; }
        
        .state-section {
            background: var(--aws-card-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
            padding: 16px;
        }
        
        .state-section h3 {
            font-size: 14px;
            color: var(--aws-text-primary);
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--aws-border);
        }
        
        .state-group {
            margin-bottom: 16px;
        }
        
        .state-group-title {
            font-size: 11px;
            color: var(--aws-text-tertiary);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        
        .state-items {
            min-height: 60px;
        }
        
        .state-item {
            background: var(--aws-panel-bg);
            border-left: 3px solid var(--aws-green);
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: var(--aws-radius);
            font-size: 12px;
            color: var(--aws-text-secondary);
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .state-item.pending {
            border-left-color: var(--aws-text-tertiary);
            opacity: 0.5;
        }
        
        .state-empty {
            color: var(--aws-text-tertiary);
            font-style: italic;
            font-size: 12px;
            padding: 8px;
        }
        
        @media (max-width: 1024px) {
            .demo-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<header class="site-header">
    <div>
        <a href="index.html" class="logo">
            <span class="logo-icon">☁</span>
            AWS Student Data Infrastructure
        </a>
        <nav class="nav-links">
            <a href="index.html">Home</a>
            <a href="architecture.html">Architecture</a>
            <a href="automation.html">IAM Automation</a>
            <a href="docs.html">Documentation</a>
            <a href="review.html">Project Review</a>
            <a href="live-demo.html" class="active">Live Demo</a>
            <a href="interactive-diagram.html">Interactive Diagram</a>
            <a href="cost-calculator.html">Cost Calculator</a>
            <a href="security-simulator.html">Security Simulator</a>
        </nav>
        <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</header>

<main class="content">
    <section class="card">
        <h1>Live IAM Automation Demo</h1>
        <p>
            Watch the IAM provisioning pipeline execute in real-time in your browser. This demonstration 
            simulates the production automation workflow including group validation, policy attachment, 
            user creation, and compliance reporting. <strong>No AWS credentials required</strong> — this is a safe simulation.
        </p>
    </section>

    <div class="run-button-container">
        <button id="runButton" class="run-button" onclick="runDemo()">
            ▶ Run IAM Automation
        </button>
        <p style="margin-top: 12px; font-size: 12px; color: var(--aws-text-tertiary);">
            Click to start the provisioning simulation
        </p>
    </div>

    <div class="demo-layout">
        <div class="console-section">
            <div class="console-header">
                <span class="console-dot red"></span>
                <span class="console-dot yellow"></span>
                <span class="console-dot green"></span>
                <span class="console-title">iam_provisioner.py — Output</span>
            </div>
            <div id="consoleWindow" class="console-window">
                <div class="log-line log-dim">Waiting to start...</div>
            </div>
        </div>
        
        <div class="state-section">
            <h3>IAM State Monitor</h3>
            
            <div class="state-group">
                <div class="state-group-title">IAM Groups</div>
                <div id="groupsList" class="state-items">
                    <div class="state-empty">Groups will appear here...</div>
                </div>
            </div>
            
            <div class="state-group">
                <div class="state-group-title">Provisioned Users</div>
                <div id="usersList" class="state-items">
                    <div class="state-empty">Users will appear here...</div>
                </div>
            </div>
            
            <div class="state-group">
                <div class="state-group-title">Applied Policies</div>
                <div id="policiesList" class="state-items">
                    <div class="state-empty">Policies will appear here...</div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer class="site-footer">
    <div class="footer-content">
        <p>Live IAM Automation Demo • AWS Student Data Infrastructure • 2025</p>
        <p class="footer-links">
            <a href="https://github.com/mjkhan9/aws-student-data-infrastructure" target="_blank" rel="noopener noreferrer">
                View on GitHub
            </a>
        </p>
    </div>
</footer>

<script>
let isRunning = false;

function log(message, type = 'info') {
    const consoleWindow = document.getElementById('consoleWindow');
    const line = document.createElement('div');
    line.className = `log-line log-${type}`;
    line.textContent = message;
    consoleWindow.appendChild(line);
    consoleWindow.scrollTop = consoleWindow.scrollHeight;
}

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

function addStateItem(listId, content) {
    const list = document.getElementById(listId);
    if (list.querySelector('.state-empty')) {
        list.innerHTML = '';
    }
    const item = document.createElement('div');
    item.className = 'state-item';
    item.textContent = content;
    list.appendChild(item);
    return item;
}

function clearState() {
    document.getElementById('consoleWindow').innerHTML = '';
    document.getElementById('groupsList').innerHTML = '<div class="state-empty">Groups will appear here...</div>';
    document.getElementById('usersList').innerHTML = '<div class="state-empty">Users will appear here...</div>';
    document.getElementById('policiesList').innerHTML = '<div class="state-empty">Policies will appear here...</div>';
}

async function runDemo() {
    if (isRunning) return;
    isRunning = true;
    
    const button = document.getElementById('runButton');
    button.disabled = true;
    button.textContent = '⏳ Running...';
    
    clearState();
    
    // Header
    log('═══════════════════════════════════════════════════════', 'dim');
    log('  AWS IAM PROVISIONING AUTOMATION v2.1.0', 'header');
    log('  Student Data Infrastructure Project', 'dim');
    log('═══════════════════════════════════════════════════════', 'dim');
    await sleep(800);
    
    // Initialization
    log('', 'dim');
    log('[INIT] Initializing IAM automation workflow...', 'info');
    await sleep(600);
    log('[INIT] Loading configuration from provisioning.yaml', 'dim');
    await sleep(500);
    log('[INIT] Validating AWS credentials... ✓', 'success');
    await sleep(400);
    log('[INIT] Session established in us-east-1', 'dim');
    await sleep(700);
    
    // Groups
    log('', 'dim');
    log('[GROUPS] Creating IAM groups...', 'info');
    await sleep(600);
    
    const groups = [
        'StudentDataReadOnly',
        'StudentDataAdmin', 
        'ReportsGeneration',
        'AuditViewers'
    ];
    
    for (const group of groups) {
        log(`[GROUPS] Creating group: ${group}`, 'dim');
        addStateItem('groupsList', group);
        await sleep(400);
        log(`[GROUPS] ✓ ${group} created successfully`, 'success');
        await sleep(300);
    }
    
    // Policies
    log('', 'dim');
    log('[POLICY] Attaching managed policies to groups...', 'info');
    await sleep(600);
    
    const policies = [
        { name: 'AmazonS3ReadOnlyAccess', group: 'StudentDataReadOnly' },
        { name: 'StudentDataCustomPolicy', group: 'StudentDataAdmin' },
        { name: 'CloudWatchLogsReadOnly', group: 'AuditViewers' }
    ];
    
    for (const policy of policies) {
        log(`[POLICY] Attaching: ${policy.name}`, 'dim');
        addStateItem('policiesList', policy.name);
        await sleep(400);
        log(`[POLICY] ✓ Attached to ${policy.group}`, 'success');
        await sleep(300);
    }
    
    // Users
    log('', 'dim');
    log('[USERS] Provisioning IAM users...', 'info');
    await sleep(600);
    
    const users = [
        { name: 'registrar_analyst', group: 'StudentDataReadOnly', dept: 'Registrar' },
        { name: 'data_admin', group: 'StudentDataAdmin', dept: 'IT' },
        { name: 'report_generator', group: 'ReportsGeneration', dept: 'Analytics' },
        { name: 'compliance_auditor', group: 'AuditViewers', dept: 'Compliance' }
    ];
    
    for (const user of users) {
        log(`[USERS] Creating user: ${user.name}`, 'dim');
        await sleep(300);
        log(`[USERS] Tagging: Department=${user.dept}, MFARequired=true`, 'dim');
        await sleep(300);
        log(`[USERS] Adding ${user.name} to ${user.group}`, 'dim');
        addStateItem('usersList', `${user.name} (${user.group})`);
        await sleep(300);
        log(`[USERS] ✓ ${user.name} provisioned successfully`, 'success');
        await sleep(400);
    }
    
    // Tags
    log('', 'dim');
    log('[TAGS] Applying compliance tags...', 'info');
    await sleep(500);
    log('[TAGS] Environment: Production', 'dim');
    await sleep(200);
    log('[TAGS] Project: StudentDataInfrastructure', 'dim');
    await sleep(200);
    log('[TAGS] ManagedBy: Automation', 'dim');
    await sleep(200);
    log('[TAGS] ✓ Tags applied to all resources', 'success');
    await sleep(700);
    
    // Validation
    log('', 'dim');
    log('[VALIDATE] Running post-provisioning validation...', 'info');
    await sleep(600);
    log('[VALIDATE] ✓ All users have MFA enforcement tag', 'success');
    await sleep(300);
    log('[VALIDATE] ✓ Password policy meets requirements', 'success');
    await sleep(300);
    log('[VALIDATE] ✓ No overly permissive policies detected', 'success');
    await sleep(300);
    log('[VALIDATE] ✓ All actions logged to CloudTrail', 'success');
    await sleep(700);
    
    // Summary
    log('', 'dim');
    log('═══════════════════════════════════════════════════════', 'dim');
    log('  ✓ PROVISIONING COMPLETE', 'success');
    log('═══════════════════════════════════════════════════════', 'dim');
    log('', 'dim');
    log(`  Users created:     ${users.length}`, 'info');
    log(`  Groups created:    ${groups.length}`, 'info');
    log(`  Policies attached: ${policies.length}`, 'info');
    log(`  Execution time:    2.4 seconds`, 'info');
    log(`  Error rate:        0%`, 'success');
    log('', 'dim');
    log('═══════════════════════════════════════════════════════', 'dim');
    
    button.disabled = false;
    button.textContent = '▶ Run Again';
    isRunning = false;
}

// Mobile menu toggle
document.querySelector('.mobile-menu-toggle')?.addEventListener('click', function() {
    document.querySelector('.nav-links').classList.toggle('mobile-open');
    this.classList.toggle('active');
});

// Close mobile menu when clicking on a link
document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', function() {
        document.querySelector('.nav-links').classList.remove('mobile-open');
        document.querySelector('.mobile-menu-toggle').classList.remove('active');
    });
});
</script>
</body>
</html>
