<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Technical Documentation | Mohammad Khan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="site-header">
    <div class="logo">AWS Student Data Infrastructure</div>
    <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="architecture.html">Architecture</a>
        <a href="automation.html">IAM Automation</a>
        <a href="docs.html" class="active">Documentation</a>
        <a href="review.html">Faculty Review</a>
    </nav>
</header>

<main class="content">
    <section class="card">
        <h1>Comprehensive Technical Documentation</h1>
        <p>
            This documentation provides complete technical specifications for the AWS student data infrastructure, 
            including network architecture, security controls, automation pipelines, operational procedures, and 
            compliance mappings. All components are designed for production deployment with high availability, 
            comprehensive audit trails, and automated security enforcement.
        </p>
    </section>

    <section class="card">
        <h2>AWS Infrastructure Components</h2>
        <table class="summary-table">
            <tr><th>Component</th><th>Resource Name</th><th>Specifications</th><th>Purpose</th></tr>
            <tr>
                <td>VPC</td>
                <td>student-data-vpc-production</td>
                <td>172.32.0.0/16, DNS enabled, Flow Logs to S3</td>
                <td>Isolated network for all student data workloads</td>
            </tr>
            <tr>
                <td>Admin Subnets</td>
                <td>admin-az1a, admin-az1b</td>
                <td>172.32.1.0/24, 172.32.2.0/24 (Public)</td>
                <td>Bastion hosts, VPN termination, monitoring</td>
            </tr>
            <tr>
                <td>App Subnets</td>
                <td>app-az1a, app-az1b</td>
                <td>172.32.10.0/24, 172.32.11.0/24 (Private)</td>
                <td>ECS Fargate tasks, application servers</td>
            </tr>
            <tr>
                <td>DB Subnets</td>
                <td>db-az1a, db-az1b</td>
                <td>172.32.20.0/24, 172.32.21.0/24 (Isolated)</td>
                <td>RDS PostgreSQL Multi-AZ deployment</td>
            </tr>
            <tr>
                <td>Internet Gateway</td>
                <td>igw-student-data-prod</td>
                <td>Attached to admin subnets only</td>
                <td>Public internet access for admin tier</td>
            </tr>
            <tr>
                <td>NAT Gateways</td>
                <td>nat-az1a, nat-az1b</td>
                <td>One per AZ with EIP allocation</td>
                <td>Outbound internet for private subnets</td>
            </tr>
            <tr>
                <td>Security Groups</td>
                <td>bastion-sg, app-sg, alb-sg, db-sg, vpce-sg</td>
                <td>Stateful rules with SG referencing</td>
                <td>Instance-level firewall controls</td>
            </tr>
            <tr>
                <td>Network ACLs</td>
                <td>admin-nacl, app-nacl, db-nacl</td>
                <td>Stateless rules at subnet boundary</td>
                <td>Additional network-level controls</td>
            </tr>
            <tr>
                <td>RDS Instance</td>
                <td>student-records-rds-prod</td>
                <td>PostgreSQL 15.3, db.r6g.xlarge, Multi-AZ</td>
                <td>Primary database for student information</td>
            </tr>
            <tr>
                <td>S3 Buckets</td>
                <td>student-data-reports-prod<br>student-data-backups-prod</td>
                <td>SSE-KMS encryption, versioning enabled</td>
                <td>Curated exports and automated backups</td>
            </tr>
            <tr>
                <td>KMS Keys</td>
                <td>alias/student-data-key<br>alias/cloudtrail-key</td>
                <td>Customer-managed, auto-rotation enabled</td>
                <td>Encryption for RDS, S3, EBS, logs</td>
            </tr>
            <tr>
                <td>IAM Groups</td>
                <td>StudentDataRestrictedAccess<br>StudentDataAnalysts<br>StudentDataAdministrators</td>
                <td>Group-based access control</td>
                <td>Least-privilege role assignments</td>
            </tr>
            <tr>
                <td>CloudTrail</td>
                <td>student-data-trail-prod</td>
                <td>Management + data events, validation enabled</td>
                <td>API call logging and audit trail</td>
            </tr>
            <tr>
                <td>VPC Endpoints</td>
                <td>s3-gateway-endpoint<br>ssm-interface-endpoint</td>
                <td>Private connectivity to AWS services</td>
                <td>S3 access and Systems Manager without IGW</td>
            </tr>
            <tr>
                <td>Application Load Balancer</td>
                <td>student-app-alb-prod</td>
                <td>HTTPS only, TLS 1.2+, WAF integrated</td>
                <td>Traffic distribution to ECS tasks</td>
            </tr>
            <tr>
                <td>ECS Cluster</td>
                <td>student-app-cluster-prod</td>
                <td>Fargate launch type, auto-scaling enabled</td>
                <td>Containerized application workloads</td>
            </tr>
        </table>
    </section>

    <section class="grid two-columns">
        <div class="card">
            <h2>Repository Structure</h2>
            <pre class="code-block">
aws-student-data-infrastructure/
├── index.html                      # Project landing page
├── architecture.html               # VPC and network architecture
├── automation.html                 # IAM automation documentation
├── docs.html                       # Technical documentation (this page)
├── review.html                     # Faculty review findings
├── style.css                       # Shared styling for all pages
├── iam_provisioner.py              # Production-grade IAM automation script
├── architecture_summary.md         # Written architecture summary
├── execution_output.txt            # Real execution logs from automation
├── faculty_review_report.md        # Faculty evaluation report
├── website_output_preview.txt      # Text preview of landing page
└── .nojekyll                       # GitHub Pages configuration
            </pre>
        </div>
        <div class="card">
            <h2>Running the IAM Automation</h2>
            <ol class="bullet-list">
                <li>Install Python 3.11 or later on your local machine</li>
                <li>Install Boto3 SDK: <code>pip install boto3</code></li>
                <li>Clone this repository: <code>git clone https://github.com/Mjkhan9/aws-student-data-infrastructure.git</code></li>
                <li>Navigate to project directory: <code>cd aws-student-data-infrastructure</code></li>
                <li>Review script configuration in <code>iam_provisioner.py</code></li>
                <li>For demo mode: <code>python iam_provisioner.py</code> (no AWS credentials required)</li>
                <li>For production: Configure AWS credentials and set <code>DEMO_MODE = False</code></li>
                <li>Review execution logs in terminal and <code>execution_output.txt</code></li>
            </ol>
            <p class="note">
                Demo mode provides safe simulation without AWS account access. Production mode requires 
                IAM permissions for user/group creation and policy attachment.
            </p>
        </div>
    </section>

    <section class="card">
        <h2>Security Architecture Deep Dive</h2>
        <ul class="bullet-list">
            <li><strong>Network Segmentation:</strong> Three-tier architecture with admin, application, and database layers physically separated by subnets and availability zones</li>
            <li><strong>Defense in Depth:</strong> Multiple security layers including security groups, NACLs, IAM policies, and encryption providing redundant protection</li>
            <li><strong>Zero Trust Model:</strong> All network traffic denied by default with explicit allow rules for authorized communication paths only</li>
            <li><strong>Least Privilege Access:</strong> IAM policies grant minimum permissions necessary; users inherit permissions from groups, not direct policy attachments</li>
            <li><strong>Encryption Everywhere:</strong> All data encrypted at rest (RDS, S3, EBS) and in transit (TLS 1.2+) using customer-managed KMS keys with automatic rotation</li>
            <li><strong>Private Database Tier:</strong> RDS instances have no public IP addresses and cannot be reached directly from internet; application tier is only authorized ingress</li>
            <li><strong>Bastion Architecture:</strong> Administrative access requires multi-hop through hardened bastion hosts with session logging via Systems Manager</li>
            <li><strong>Security Group Chaining:</strong> Security groups reference other security groups by ID rather than IP ranges enabling automatic updates as infrastructure scales</li>
            <li><strong>Network ACL Enforcement:</strong> Stateless firewall rules at subnet boundaries prevent lateral movement even if security groups are misconfigured</li>
            <li><strong>VPC Flow Logs:</strong> All network traffic logged at 1-minute intervals capturing source, destination, protocol, ports, and action (accept/reject)</li>
            <li><strong>CloudTrail Logging:</strong> Every API call logged with caller identity, timestamp, source IP, and parameters enabling complete audit trail</li>
            <li><strong>GuardDuty Integration:</strong> Machine learning-based threat detection analyzing CloudTrail events, VPC Flow Logs, and DNS queries</li>
        </ul>
    </section>

    <section class="grid two-columns">
        <div class="card">
            <h2>High Availability Configuration</h2>
            <table class="summary-table">
                <tr><th>Component</th><th>HA Strategy</th><th>RTO/RPO</th></tr>
                <tr><td>RDS Database</td><td>Multi-AZ with automatic failover</td><td>RTO: 60-120s, RPO: 0</td></tr>
                <tr><td>Application Tier</td><td>ECS auto-scaling across 2 AZs</td><td>RTO: 30s, RPO: N/A</td></tr>
                <tr><td>NAT Gateways</td><td>One per AZ for redundancy</td><td>RTO: 0s, RPO: N/A</td></tr>
                <tr><td>Load Balancer</td><td>ALB spans both AZs</td><td>RTO: 0s, RPO: N/A</td></tr>
                <tr><td>S3 Storage</td><td>11 9's durability, cross-region replication</td><td>RTO: 15min, RPO: 15min</td></tr>
            </table>
        </div>
        <div class="card">
            <h2>Backup and Recovery</h2>
            <ul class="bullet-list">
                <li><strong>RDS Automated Backups:</strong> Daily snapshots retained for 30 days with point-in-time recovery to any second</li>
                <li><strong>Manual Snapshots:</strong> Before major changes with indefinite retention for compliance requirements</li>
                <li><strong>S3 Versioning:</strong> All objects versioned preventing accidental deletion or overwrite</li>
                <li><strong>Cross-Region Replication:</strong> S3 replication to us-west-2 for disaster recovery</li>
                <li><strong>Infrastructure as Code:</strong> VPC and security group configurations in Git for rapid rebuilding</li>
            </ul>
        </div>
    </section>

    <section class="card">
        <h2>Compliance and Regulatory Mapping</h2>
        <table class="summary-table">
            <tr><th>Requirement</th><th>Regulation</th><th>Implementation</th><th>Validation</th></tr>
            <tr>
                <td>Data Encryption</td>
                <td>FERPA § 99.31</td>
                <td>KMS-encrypted RDS and S3</td>
                <td>Config Rules: encrypted-volumes</td>
            </tr>
            <tr>
                <td>Access Control</td>
                <td>FERPA § 99.31</td>
                <td>IAM policies with least privilege</td>
                <td>IAM Access Analyzer</td>
            </tr>
            <tr>
                <td>Audit Logging</td>
                <td>FERPA § 99.32</td>
                <td>CloudTrail with integrity validation</td>
                <td>CloudTrail Insights enabled</td>
            </tr>
            <tr>
                <td>Network Isolation</td>
                <td>NIST 800-53 AC-4</td>
                <td>VPC with private database tier</td>
                <td>VPC Flow Logs analysis</td>
            </tr>
            <tr>
                <td>Incident Response</td>
                <td>NIST 800-53 IR-4</td>
                <td>GuardDuty + SNS notifications</td>
                <td>Incident response runbooks</td>
            </tr>
            <tr>
                <td>Data Retention</td>
                <td>State Law Varies</td>
                <td>S3 lifecycle policies</td>
                <td>Automated retention enforcement</td>
            </tr>
        </table>
    </section>

    <section class="card">
        <h2>Monitoring and Observability</h2>
        <ul class="bullet-list">
            <li><strong>CloudWatch Metrics:</strong> RDS CPU, memory, disk I/O, connection count; ECS task CPU/memory; ALB request count and latency</li>
            <li><strong>CloudWatch Alarms:</strong> Critical alerts for database failover, high error rates, unusual access patterns, security group changes</li>
            <li><strong>CloudWatch Dashboards:</strong> Real-time visibility into system health with custom metrics and log insights queries</li>
            <li><strong>VPC Flow Logs Analysis:</strong> Automated detection of port scanning, unusual traffic volumes, and blocked connection attempts</li>
            <li><strong>CloudTrail Insights:</strong> Machine learning detection of unusual API activity patterns indicating potential compromise</li>
            <li><strong>RDS Performance Insights:</strong> Database query performance analysis with automatic identification of slow queries and lock contention</li>
            <li><strong>X-Ray Tracing:</strong> Distributed tracing for application requests tracking end-to-end latency across microservices</li>
            <li><strong>GuardDuty Findings:</strong> Threat detection findings with severity scoring and automated response via Lambda</li>
        </ul>
    </section>

    <section class="grid two-columns">
        <div class="card">
            <h2>Operational Runbooks</h2>
            <ul class="bullet-list">
                <li><strong>New User Onboarding:</strong> Execute iam_provisioner.py with user manifest; verify group membership; confirm MFA setup</li>
                <li><strong>User Offboarding:</strong> Remove from IAM groups; disable access keys; archive home directories; document in audit log</li>
                <li><strong>Database Failover Test:</strong> Force RDS failover via console; verify application reconnection; check DNS propagation time</li>
                <li><strong>Security Incident Response:</strong> Isolate compromised instances via security group; capture forensic snapshots; review CloudTrail logs</li>
                <li><strong>Backup Restoration:</strong> Select RDS snapshot; restore to new instance; update application connection strings; validate data integrity</li>
                <li><strong>Network Troubleshooting:</strong> Review VPC Flow Logs; check security group rules; verify route tables; test with VPC Reachability Analyzer</li>
            </ul>
        </div>
        <div class="card">
            <h2>Cost Optimization</h2>
            <ul class="bullet-list">
                <li><strong>RDS Instance Sizing:</strong> Right-sized db.r6g.xlarge based on performance metrics; reserved instance pricing for 40% savings</li>
                <li><strong>S3 Intelligent-Tiering:</strong> Automatic movement to lower-cost storage classes for infrequently accessed exports</li>
                <li><strong>NAT Gateway Optimization:</strong> Single NAT Gateway per AZ balancing cost with availability requirements</li>
                <li><strong>VPC Flow Logs Sampling:</strong> 1-minute intervals instead of all traffic for cost-effective monitoring</li>
                <li><strong>CloudWatch Logs Retention:</strong> 90-day retention with archival to S3 Glacier for long-term compliance</li>
                <li><strong>Spot Instances:</strong> ECS Fargate Spot for non-critical batch processing workloads reducing compute costs by 70%</li>
            </ul>
        </div>
    </section>

    <section class="card">
        <h2>Technology Stack Details</h2>
        <table class="summary-table">
            <tr><th>Layer</th><th>Technology</th><th>Version</th><th>Purpose</th></tr>
            <tr><td>Compute</td><td>Amazon ECS Fargate</td><td>Platform 1.4.0</td><td>Serverless container orchestration</td></tr>
            <tr><td>Database</td><td>Amazon RDS PostgreSQL</td><td>15.3</td><td>Relational database for student records</td></tr>
            <tr><td>Storage</td><td>Amazon S3</td><td>N/A</td><td>Object storage for exports and backups</td></tr>
            <tr><td>Networking</td><td>Amazon VPC</td><td>N/A</td><td>Isolated virtual network</td></tr>
            <tr><td>Security</td><td>AWS IAM</td><td>N/A</td><td>Identity and access management</td></tr>
            <tr><td>Encryption</td><td>AWS KMS</td><td>N/A</td><td>Customer-managed encryption keys</td></tr>
            <tr><td>Monitoring</td><td>Amazon CloudWatch</td><td>N/A</td><td>Metrics, logs, and alarms</td></tr>
            <tr><td>Audit</td><td>AWS CloudTrail</td><td>N/A</td><td>API call logging and compliance</td></tr>
            <tr><td>Automation</td><td>Python + Boto3</td><td>3.11 + 1.34.x</td><td>Infrastructure automation</td></tr>
            <tr><td>Load Balancing</td><td>Application Load Balancer</td><td>N/A</td><td>Layer 7 traffic distribution</td></tr>
            <tr><td>Threat Detection</td><td>Amazon GuardDuty</td><td>N/A</td><td>Intelligent threat detection</td></tr>
        </table>
    </section>

    <section class="card">
        <h2>Future Enhancements</h2>
        <ul class="bullet-list">
            <li><strong>Infrastructure as Code:</strong> Migrate to Terraform or CloudFormation for complete infrastructure provisioning automation</li>
            <li><strong>CI/CD Pipeline:</strong> Implement GitLab CI or GitHub Actions for automated testing and deployment of infrastructure changes</li>
            <li><strong>Secrets Management:</strong> Integrate AWS Secrets Manager for database credentials with automatic rotation</li>
            <li><strong>WAF Integration:</strong> Deploy AWS WAF on ALB with OWASP Top 10 rule sets and rate limiting</li>
            <li><strong>Enhanced Monitoring:</strong> Custom CloudWatch metrics for business KPIs; Grafana dashboards for operations team</li>
            <li><strong>Automated Compliance:</strong> AWS Config conformance packs for continuous CIS Benchmark validation</li>
            <li><strong>Disaster Recovery Automation:</strong> Lambda functions orchestrating cross-region failover with RTO under 5 minutes</li>
            <li><strong>Data Classification:</strong> Amazon Macie scanning S3 buckets for PII exposure and classification violations</li>
        </ul>
    </section>
</main>

<footer class="site-footer">
    <p>Technical Documentation • Mohammad Khan • March 10, 2024</p>
</footer>
</body>
</html>