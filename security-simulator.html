<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Security Simulator | AWS Student Data Infrastructure</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Security Simulator - AWS Console Style */
        .simulator-layout {
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: 16px;
            min-height: 600px;
        }
        
        .attack-panel {
            background: var(--aws-panel-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
            padding: 16px;
        }
        
        .attack-panel h3 {
            font-size: 13px;
            color: var(--aws-text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            font-weight: 700;
        }
        
        .attack-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .attack-button {
            background: var(--aws-panel-bg);
            border: 1px solid var(--aws-border);
            border-left: 3px solid var(--aws-red);
            border-radius: var(--aws-radius);
            padding: 12px;
            cursor: pointer;
            transition: all 0.15s ease;
            text-align: left;
            font-family: inherit;
        }
        
        .attack-button:hover:not(:disabled) {
            background: var(--aws-card-bg);
            border-left-color: var(--aws-red-light);
        }
        
        .attack-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .attack-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--aws-text-primary);
            margin-bottom: 4px;
        }
        
        .attack-desc {
            font-size: 11px;
            color: var(--aws-text-tertiary);
            line-height: 1.4;
        }
        
        /* Visualization Canvas */
        .visualization-container {
            background: var(--aws-panel-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
            padding: 16px;
        }
        
        .visualization-header {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--aws-border);
        }
        
        .visualization-header h2 {
            font-size: 18px;
            color: var(--aws-text-primary);
            margin: 0;
            border: none;
            padding: 0;
        }
        
        .visualization {
            position: relative;
            min-height: 500px;
            background: var(--aws-squid-ink-dark);
            border-radius: var(--aws-radius);
            border: 1px solid var(--aws-border);
            /* Blueprint grid background */
            background-image: 
                linear-gradient(rgba(59, 130, 246, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(59, 130, 246, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .network-layer {
            position: absolute;
            padding: 12px;
            border-radius: var(--aws-radius);
            border: 2px solid;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .layer-internet {
            top: 20px;
            left: 20px;
            width: 200px;
            background: rgba(184, 134, 11, 0.12);
            border-color: #b8860b;
        }
        
        .layer-admin {
            top: 100px;
            left: 20px;
            width: 200px;
            background: rgba(74, 124, 184, 0.12);
            border-color: #4a7cb8;
        }
        
        .layer-app {
            top: 180px;
            left: 20px;
            width: 200px;
            background: rgba(107, 91, 163, 0.12);
            border-color: #6b5ba3;
        }
        
        .layer-db {
            top: 260px;
            left: 20px;
            width: 200px;
            background: rgba(184, 74, 124, 0.12);
            border-color: #b84a7c;
        }
        
        .layer-title {
            font-weight: 700;
            color: var(--aws-text-primary);
            margin-bottom: 4px;
        }
        
        .layer-desc {
            font-size: 11px;
            color: var(--aws-text-tertiary);
        }
        
        .attacker {
            position: absolute;
            width: 50px;
            height: 50px;
            background: var(--aws-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);
            opacity: 0;
            transition: all 0.4s ease;
        }
        
        .attacker.active {
            opacity: 1;
        }
        
        /* FIXED: No more glowing neon - subtle AWS-style highlight */
        .defense-layer {
            position: absolute;
            background: rgba(16, 185, 129, 0.08);
            border: 2px solid var(--aws-green);
            border-radius: var(--aws-radius);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .defense-layer.active {
            opacity: 1;
        }
        
        /* FIXED: No glowing effect - clean AWS alert style */
        .block-indicator {
            position: absolute;
            background: var(--aws-red);
            color: white;
            padding: 10px 16px;
            border-radius: var(--aws-radius);
            font-weight: 700;
            font-size: 13px;
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.25s ease;
            border: 1px solid var(--aws-red-light);
        }
        
        .block-indicator.show {
            opacity: 1;
            transform: scale(1);
        }
        
        .log-panel {
            background: var(--aws-panel-bg);
            border: 1px solid var(--aws-border);
            border-radius: var(--aws-radius);
            padding: 16px;
            margin-top: 16px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .log-panel h3 {
            font-size: 13px;
            color: var(--aws-text-tertiary);
            font-weight: 700;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .log-entry {
            padding: 6px 10px;
            margin: 4px 0;
            border-radius: var(--aws-radius);
            font-family: Monaco, monospace;
            font-size: 12px;
            opacity: 0;
            animation: logFadeIn 0.3s forwards;
            border-left: 2px solid;
        }
        
        @keyframes logFadeIn {
            to { opacity: 1; }
        }
        
        .log-info {
            background: rgba(30, 143, 255, 0.1);
            color: var(--aws-blue-light);
            border-left-color: var(--aws-blue);
        }
        
        .log-warning {
            background: rgba(255, 153, 0, 0.1);
            color: var(--aws-orange);
            border-left-color: var(--aws-orange);
        }
        
        .log-error {
            background: rgba(209, 50, 18, 0.1);
            color: var(--aws-red-light);
            border-left-color: var(--aws-red);
        }
        
        .log-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--aws-green-light);
            border-left-color: var(--aws-green);
        }
        
        .defense-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .stat-card {
            background: var(--aws-card-bg);
            border: 1px solid var(--aws-border);
            border-left: 3px solid var(--aws-green);
            padding: 12px;
            border-radius: var(--aws-radius);
            text-align: center;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--aws-green-light);
            line-height: 1;
            margin-bottom: 6px;
        }
        
        .stat-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--aws-text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        @media (max-width: 1024px) {
            .simulator-layout {
                grid-template-columns: 1fr;
            }
            
            .defense-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 640px) {
            .defense-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<header class="site-header">
    <div>
        <div class="logo">AWS Student Data Infrastructure</div>
        <nav class="nav-links">
            <a href="index.html">Home</a>
            <a href="architecture.html">Architecture</a>
            <a href="automation.html">IAM Automation</a>
            <a href="docs.html">Documentation</a>
            <a href="review.html">Project Summary</a>
            <a href="live-demo.html">Live Demo</a>
            <a href="interactive-diagram.html">Interactive Diagram</a>
            <a href="cost-calculator.html">Cost Calculator</a>
            <a href="security-simulator.html" class="active">Security Simulator</a>
        </nav>
    </div>
</header>

<main class="content">
    <section class="card">
        <h1>Security Attack Simulator</h1>
        <p>
            This interactive simulator demonstrates how multi-layer security architecture blocks common attack 
            vectors. Select an attack scenario to watch defense mechanisms activate in real-time, showing 
            security groups, NACLs, IAM policies, and encryption working together.
        </p>
    </section>

    <div class="defense-stats">
        <div class="stat-card">
            <div class="stat-value" id="attacksBlocked">0</div>
            <div class="stat-label">Attacks Blocked</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="layersActive">0</div>
            <div class="stat-label">Defense Layers</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">100%</div>
            <div class="stat-label">Success Rate</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">0</div>
            <div class="stat-label">Breaches</div>
        </div>
    </div>

    <div class="simulator-layout">
        <aside class="attack-panel">
            <h3>Attack Scenarios</h3>
            <div class="attack-buttons">
                <button class="attack-button" onclick="simulateAttack('direct-db')">
                    <div class="attack-title">üéØ Direct Database Access</div>
                    <div class="attack-desc">Attempt to connect to RDS from internet</div>
                </button>
                
                <button class="attack-button" onclick="simulateAttack('lateral-movement')">
                    <div class="attack-title">‚ÜîÔ∏è Lateral Movement</div>
                    <div class="attack-desc">Try to move from app tier to admin tier</div>
                </button>
                
                <button class="attack-button" onclick="simulateAttack('privilege-escalation')">
                    <div class="attack-title">‚¨ÜÔ∏è IAM Privilege Escalation</div>
                    <div class="attack-desc">Attempt to attach admin policy to user</div>
                </button>
                
                <button class="attack-button" onclick="simulateAttack('s3-public')">
                    <div class="attack-title">üåê S3 Public Exposure</div>
                    <div class="attack-desc">Try to make bucket public-read</div>
                </button>
                
                <button class="attack-button" onclick="simulateAttack('unencrypted-data')">
                    <div class="attack-title">üîì Unencrypted Data Access</div>
                    <div class="attack-desc">Access data without encryption key</div>
                </button>
                
                <button class="attack-button" onclick="simulateAttack('sg-misconfiguration')">
                    <div class="attack-title">üî• Security Group Bypass</div>
                    <div class="attack-desc">Exploit 0.0.0.0/0 rules</div>
                </button>
            </div>
        </aside>

        <div class="visualization-container">
            <div class="visualization-header">
                <h2>Network Defense Visualization</h2>
            </div>
            
            <div class="visualization" id="visualization">
                <div class="network-layer layer-internet">
                    <div class="layer-title">Internet</div>
                    <div class="layer-desc">Untrusted Network</div>
                </div>
                <div class="network-layer layer-admin">
                    <div class="layer-title">Admin Tier</div>
                    <div class="layer-desc">172.32.1.0/24</div>
                </div>
                <div class="network-layer layer-app">
                    <div class="layer-title">App Tier</div>
                    <div class="layer-desc">172.32.10.0/24</div>
                </div>
                <div class="network-layer layer-db">
                    <div class="layer-title">DB Tier</div>
                    <div class="layer-desc">172.32.20.0/24</div>
                </div>
                
                <div class="attacker" id="attacker">‚ö†Ô∏è</div>
                <div class="block-indicator" id="blockIndicator">‚ùå BLOCKED</div>
            </div>
        </div>
    </div>

    <div class="log-panel" id="logPanel">
        <h3>Security Event Log</h3>
        <div id="logEntries"></div>
    </div>
</main>

<footer class="site-footer">
    <p>Security Attack Simulator ‚Ä¢ AWS Student Data Infrastructure ‚Ä¢ 2025</p>
</footer>

<script>
let attackCount = 0;
let isSimulating = false;

const attackScenarios = {
    "direct-db": {
        title: "Direct Database Access from Internet",
        steps: [
            { type: "info", message: "üéØ Attack: External IP attempting connection to RDS PostgreSQL port 5432" },
            { type: "warning", message: "‚ö†Ô∏è Source: 203.0.113.45 ‚Üí Target: 172.32.20.15:5432" },
            { type: "info", message: "üîç Checking route tables..." },
            { type: "success", message: "‚úì Database subnet has NO internet gateway route" },
            { type: "success", message: "‚úì Database instances have NO public IP addresses" },
            { type: "info", message: "üîç Checking security group db-sg..." },
            { type: "success", message: "‚úì Security group only allows TCP 5432 from app-sg (not IP ranges)" },
            { type: "info", message: "üîç Checking Network ACL..." },
            { type: "success", message: "‚úì NACL denies all inbound traffic except from app subnet CIDR" },
            { type: "error", message: "‚ùå ATTACK BLOCKED: No route exists from internet to database tier" }
        ],
        defensePositions: [
            { left: 20, top: 260, width: 200, height: 80 }
        ]
    },
    "lateral-movement": {
        title: "Lateral Movement: App Tier ‚Üí Admin Tier",
        steps: [
            { type: "info", message: "‚ÜîÔ∏è Attack: Compromised app server attempting SSH to admin tier" },
            { type: "warning", message: "‚ö†Ô∏è Source: 172.32.10.42 ‚Üí Target: 172.32.1.25:22" },
            { type: "info", message: "üîç Checking security groups..." },
            { type: "success", message: "‚úì bastion-sg ingress: Only allows corporate IPs, not app tier" },
            { type: "info", message: "üîç Checking Network ACL rules..." },
            { type: "success", message: "‚úì admin-nacl: Explicit deny for traffic from app subnets" },
            { type: "error", message: "‚ùå ATTACK BLOCKED: Security groups prevent cross-tier access" }
        ],
        defensePositions: [
            { left: 20, top: 100, width: 200, height: 70 }
        ]
    },
    "privilege-escalation": {
        title: "IAM Privilege Escalation Attempt",
        steps: [
            { type: "info", message: "‚¨ÜÔ∏è Attack: User attempting to attach AdministratorAccess policy" },
            { type: "warning", message: "‚ö†Ô∏è Action: iam:AttachUserPolicy ‚Üí Policy: AdministratorAccess" },
            { type: "info", message: "üîç Checking IAM permissions..." },
            { type: "success", message: "‚úì User is in StudentDataRestrictedAccess group (read-only)" },
            { type: "success", message: "‚úì User has NO iam:AttachUserPolicy permission" },
            { type: "info", message: "üìù CloudTrail logging unauthorized action attempt" },
            { type: "error", message: "‚ùå ATTACK BLOCKED: AccessDenied - Insufficient IAM permissions" }
        ],
        defensePositions: []
    },
    "s3-public": {
        title: "S3 Bucket Public Exposure Attempt",
        steps: [
            { type: "info", message: "üåê Attack: Attempting to set s3:PutBucketAcl to public-read" },
            { type: "warning", message: "‚ö†Ô∏è Target: student-data-reports-production" },
            { type: "info", message: "üîç Checking S3 Block Public Access..." },
            { type: "success", message: "‚úì BlockPublicAcls: ENABLED (account-level)" },
            { type: "success", message: "‚úì BlockPublicPolicy: ENABLED (bucket-level)" },
            { type: "success", message: "‚úì IgnorePublicAcls: ENABLED" },
            { type: "error", message: "‚ùå ATTACK BLOCKED: S3 Block Public Access prevents exposure" }
        ],
        defensePositions: []
    },
    "unencrypted-data": {
        title: "Unencrypted Data Access Attempt",
        steps: [
            { type: "info", message: "üîì Attack: Attempting to read RDS snapshot without decryption key" },
            { type: "warning", message: "‚ö†Ô∏è Snapshot: student-records-snapshot-2025" },
            { type: "info", message: "üîç Checking encryption status..." },
            { type: "success", message: "‚úì Snapshot encrypted with KMS key: alias/student-data-key" },
            { type: "success", message: "‚úì Key policy: Only specific IAM roles can decrypt" },
            { type: "error", message: "‚ùå ATTACK BLOCKED: KMS denies decrypt without proper credentials" }
        ],
        defensePositions: []
    },
    "sg-misconfiguration": {
        title: "Security Group Misconfiguration Exploit",
        steps: [
            { type: "info", message: "üî• Attack: Searching for 0.0.0.0/0 security group rules" },
            { type: "warning", message: "‚ö†Ô∏è Target: Any security group with overly permissive rules" },
            { type: "info", message: "üîç Scanning all security groups..." },
            { type: "success", message: "‚úì Admin tier SGs: Only specific corporate IP ranges allowed" },
            { type: "success", message: "‚úì App tier SGs: Use security group referencing (not IPs)" },
            { type: "success", message: "‚úì DB tier SGs: Only app-sg can reach port 5432" },
            { type: "success", message: "‚úì Zero instances of 0.0.0.0/0 on ingress rules" },
            { type: "error", message: "‚ùå ATTACK BLOCKED: No exploitable security group misconfigurations" }
        ],
        defensePositions: [
            { left: 20, top: 100, width: 200, height: 230 }
        ]
    }
};

function addLogEntry(type, message) {
    const logEntries = document.getElementById("logEntries");
    const entry = document.createElement("div");
    entry.className = `log-entry log-${type}`;
    entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
    logEntries.appendChild(entry);
    logEntries.scrollTop = logEntries.scrollHeight;
}

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function simulateAttack(attackType) {
    if (isSimulating) return;
    isSimulating = true;
    
    document.querySelectorAll(".attack-button").forEach(btn => btn.disabled = true);
    
    const scenario = attackScenarios[attackType];
    const attacker = document.getElementById("attacker");
    const blockIndicator = document.getElementById("blockIndicator");
    const logEntries = document.getElementById("logEntries");
    
    logEntries.innerHTML = "";
    document.querySelectorAll(".defense-layer").forEach(el => el.remove());
    
    attacker.style.left = "300px";
    attacker.style.top = "20px";
    attacker.classList.add("active");
    
    addLogEntry("info", `‚ïê‚ïê‚ïê ${scenario.title} ‚ïê‚ïê‚ïê`);
    await sleep(1000);
    
    for (let i = 0; i < scenario.steps.length; i++) {
        const step = scenario.steps[i];
        addLogEntry(step.type, step.message);
        
        if (i % 3 === 0 && i > 0) {
            attacker.style.top = `${20 + (i * 15)}px`;
        }
        
        await sleep(700);
    }
    
    if (scenario.defensePositions.length > 0) {
        for (const pos of scenario.defensePositions) {
            const defense = document.createElement("div");
            defense.className = "defense-layer active";
            defense.style.left = `${pos.left}px`;
            defense.style.top = `${pos.top}px`;
            defense.style.width = `${pos.width}px`;
            defense.style.height = `${pos.height}px`;
            document.getElementById("visualization").appendChild(defense);
        }
    }
    
    await sleep(400);
    
    blockIndicator.style.left = "300px";
    blockIndicator.style.top = "200px";
    blockIndicator.classList.add("show");
    
    await sleep(2000);
    
    blockIndicator.classList.remove("show");
    attacker.classList.remove("active");
    
    attackCount++;
    document.getElementById("attacksBlocked").textContent = attackCount;
    document.getElementById("layersActive").textContent = Math.min(attackCount, 6);
    
    await sleep(400);
    
    document.querySelectorAll(".attack-button").forEach(btn => btn.disabled = false);
    isSimulating = false;
}

addLogEntry("info", "Security simulator ready. Select an attack to begin.");
</script>
</body>
</html>
